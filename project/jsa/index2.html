<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:d="http://www.xidea.org/taglib/decorator" lang="zh_CN">
<head>
<base href="http://www.xidea.org/project/jsa/" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="keywords"
  content="JSA,JSIntegration,JavaScript Integration,脚本,压缩,混淆" />
<title>JSIntegration 主页</title>
<script src="../jsi_v2.0/scripts/boot.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../jsi_v2.0/styles/default.css" />
<style>
.example td{
  vertical-align:top;
}
#main{
  width:760px;
}
</style>
</head>
<body>
<div id="main">
<br />
<p>
<strong>JSA</strong> 是一个脚本压缩、混淆、分析工具，也是
<a href="http://www.xidea.org/project/jsi">JSI</a>的编译工具，有着非常可观的压缩质量和压缩比率。 
JSA 的运用，可以减轻网络负担，保护源代码。</p>
<br />
<div style="none;float: right;width:40%;color:red;background: yellow;">
JSA 新版本预览
<ul>
  <li><a href="http://hi.baidu.com/jindw/blog/item/f006c562610a3bd9e6113a6d.html">JSA 最新版本截图</a></li>
  <li><a href="http://hi.baidu.com/jindw/blog/item/3af1f5ddd8ba15eb77c63810.html">未来JSI IDE需要支持的功能</a></li>
</ul>
</div>
<ul>
  <li><a href="#example">压缩示例</a></li>
  <li><a href="http://www.xidea.org/webstart/JSA.jnlp" style="font-weight:bold">WebStart启动</a>
    <d:tooltip width="200">请<strong>暂时</strong>信任我们的站内测试签名，以使用JSA的完整功能。</d:tooltip>
  </li>
  <li><a href="http://www.xidea.org/webstart/JSA2.jnlp">WebStart启动(砂箱运行,功能受限)</a></li>
  <li><a href="#webjsi">在线压缩</a></li>
  <li><a href="http://sourceforge.net/project/showfiles.php?group_id=175776">下载(Java Swing 程序)</a></li>
</ul>

<br /><br />



<a name="example"></a>
<table class="example" width="98%">

<tr><th colspan='2'>
压缩示例</th></tr>
<tr>
<td rowspan="2">
<h4>源代码</h4>
<d:code><textarea>
/**
 * test function
 */
function test1(param1,param2){
  return param1+param2;
}

/**
 * test function and eval(compressed safely)
 */
function test1(param1,param2){
  return eval("param1+param2");
}

/**
 * test inner function
 */
function test1(param1,param2){
  function add(paramx,paramy){
    return paramx+paramy;    
  }
  return add(param1,param2);
}

/**
 * test empty try(code optimize)
 */
try{
}catch(ex){
  alert(ex)
}finally{
  alert(y)
}

</textarea></d:code>
<p></p>
</td>
<td><h4>未执行文本压缩的结果(格式化，便于查看)</h4><d:code><textarea>
/*
 * Compressed by JSA(www.xidea.org)
 */
function test1(B,A){
  return B+A;
}
function test1(param1,param2){
  return eval("param1+param2");
}
function test1(C,A){
  function B(A,B){
    return A+B;
  }
  return B(C,A);
}
alert(y);
</textarea></d:code></td>
</tr>
<tr>
<td width="50%">
<h4>执行了文本压缩的结果</h4>
<div style="width:360px;overflow:auto;overflow-y:visible">
<d:code>
<textarea>
/*
 * Compressed by JSA(www.xidea.org)
 */
eval(function(E,I,A,D,J,K,L,H){function C(A){return String.fromCharCode(A+65)}while(A>0)K[C(D--)]=I[--A];function N(A){return K[A]==L[A]?A:K[A]}if(''.replace(/^/,String)){var M=E.match(J),B=M[0],F=E.split(J),G=0;if(E.indexOf(F[0]))F=[''].concat(F);do{H[A++]=F[G++];H[A++]=N(B)}while(B=M[G]);H[A++]=F[G]||'';return H.join('')}return E.replace(J,N)}('/*\n * Compressed by JSA(www.xidea.org)\n */\r\nH D(B,A){\r\n  F B+A;\r\n}\r\nH D(G,E){\r\n  F eval("G+E");\r\n}\r\nH D(C,A){\r\n  H B(A,B){\r\n    F A+B;\r\n  }\r\n  F B(C,A);\r\n}\r\nalert(y);','test1|param2|return|param1|function'.split('|'),5,7,/[\w\$]+/g,{},{},[]))</textarea>
</d:code></div></td>
</tr>
</table>
<br /><br /><br /><br />








<a name="webjsi"></a>
<form action="http://jsa.eaxi.com/jsa.jsp;.txt" method="post" target="result"
 onsubmit="return beforeSubmit(this)">
	<table width="98%">
		<tr>
			<th colspan='2'>在线压缩(由<a href="http://jsa.eaxi.com/">jsa.eaxi.com</a>提供)</th>
		</tr>
		<tr>
			<td colspan='2'>

				<textarea id="source" name="source" style="width:100%;height:200px"></textarea>
			</td>
		</tr>
		<tr>
			<td align="left" valign="top">
				<label for="source">源代码 &#8593;</label>
			</td>
			<td align="right">
				<div>
					<label for="syntaxCompression">执行语法压缩</label>
					<input type="checkbox" checked="true" value="true" name="syntaxCompression" />
					<label for="textCompression">执行文本压缩</label>
					<input type="checkbox" checked="true" value="true" name="textCompression" />
					<label for="size">大小</label>
					<input type="text" size="5" value="1000" name="size" onchange="return checkField(this)" title="执行文本压缩的最小大小条件" />

					<label for="ratio">比率</label>
					<input type="text" size="5" value="0.99" name="ratio" onchange="return checkField(this)" title="选择文本压缩结果时的最小压缩比率条件" />
				</div>
				<div>
					<label for="token">验证码</label><input type="text" size="5" id="token" name="token"  onchange="return checkField(this)"/>
					<img onload="document.getElementById('submit').disabled=false" src="http://jsa.eaxi.com/jsa.jsp?action=imageToken&time=0" title="点击刷新" onclick="this.src = this.src.replace(/\d+$/,new Date().getTime())"  width="86px" height="20" border=1 align="absbottom" style="cursor:pointer" />
					<input id="submit" type="submit" value="执行压缩" disabled='true'/>
				</div>
			</td>
		</tr>

	</table>
</form>
<script>
	var validationMap = {
	  size:new Validation(/^\d+$/,'size must be a int value'),
	  ratio:new Validation(/^\d+(\.\d+)?$/,'ratio must be a float value'),
	  token:new Validation(/^\w{5}$/,'token must be 5 chars')
	}
	function Validation(pattern,msg){
	  this.pattern = pattern;
	  this.msg = msg;
	}
	Validation.prototype.validate = function(input){
	  	if(this.pattern.test(input.value)){
		  return true;
		}else{
		  confirm(this.msg);
		  input.select();
		  input.focus();
		  return false;
		}
	}
	function checkField(input){
	    var validation = validationMap[input.name];
	    if(validation){
	      return validation.validate(input)
	    }
	}
	function beforeSubmit(form){
	  var elements = form.elements;
	  for(var i=0;i<elements.length;i++){
	    var input = elements.item(i);
	    if(checkField(input) === false){
	      return false;
	    }
	  }
	  open('about:blank','result','top=220px,left=220px,width=680px,height=240px,scrollbars=yes');
	  document.getElementById("submit").disabled=true;
	  return true;
	}
	/*
var services = function(){
  var temp = ["a"];
  var index = Math.floor(temp.length * Math.random())
  return temp.slice(index).concat(temp.slice(0,index))
}();
function testNextService(){
  document.write("<script src='" + services.pop() + "?test=true'><\/script>");
  document.write("<script src='service-test.js'><\/script>");
}
testNextService();
*/
</script>

<br /><br /><br /><br />
</div>
</body>
</html>

